<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document Integrity Framework ‚Äî WINDI v0.1</title>
    <style>
        :root {
            --windi-primary: #0d9488;
            --windi-dark: #0f766e;
            --windi-light: #f0fdfa;
            --windi-accent: #14b8a6;
            --text-primary: #1e293b;
            --text-secondary: #64748b;
            --border-color: #e2e8f0;
            --code-bg: #1e293b;
        }
        
        * { box-sizing: border-box; margin: 0; padding: 0; }
        
        body {
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
            line-height: 1.7;
            color: var(--text-primary);
            background: linear-gradient(135deg, #f8fafc 0%, #f0fdfa 100%);
            min-height: 100vh;
        }
        
        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 40px 24px;
        }
        
        header {
            text-align: center;
            margin-bottom: 48px;
            padding-bottom: 32px;
            border-bottom: 3px solid var(--windi-primary);
        }
        
        .badge {
            display: inline-block;
            background: var(--windi-primary);
            color: white;
            padding: 4px 12px;
            border-radius: 16px;
            font-size: 12px;
            font-weight: 600;
            margin-bottom: 16px;
        }
        
        h1 {
            font-size: 2.5rem;
            color: var(--windi-dark);
            margin-bottom: 8px;
        }
        
        .subtitle {
            font-size: 1.25rem;
            color: var(--text-secondary);
        }
        
        .principle {
            background: var(--windi-light);
            border-left: 4px solid var(--windi-primary);
            padding: 16px 24px;
            margin: 32px 0;
            font-style: italic;
            color: var(--windi-dark);
        }
        
        h2 {
            font-size: 1.75rem;
            color: var(--windi-dark);
            margin: 48px 0 24px;
            padding-bottom: 8px;
            border-bottom: 2px solid var(--border-color);
        }
        
        h3 {
            font-size: 1.25rem;
            color: var(--text-primary);
            margin: 32px 0 16px;
        }
        
        p {
            margin-bottom: 16px;
            color: var(--text-primary);
        }
        
        .architecture-box {
            background: white;
            border: 2px solid var(--border-color);
            border-radius: 12px;
            padding: 24px;
            margin: 24px 0;
            box-shadow: 0 4px 6px rgba(0,0,0,0.05);
        }
        
        .architecture-box h4 {
            color: var(--windi-primary);
            margin-bottom: 16px;
            font-size: 1.1rem;
        }
        
        pre {
            background: var(--code-bg);
            color: #e2e8f0;
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 14px;
            line-height: 1.5;
            margin: 16px 0;
        }
        
        code {
            background: #f1f5f9;
            padding: 2px 6px;
            border-radius: 4px;
            font-family: 'Consolas', monospace;
            font-size: 0.9em;
            color: var(--windi-dark);
        }
        
        pre code {
            background: none;
            padding: 0;
            color: inherit;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 24px 0;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }
        
        th {
            background: var(--windi-primary);
            color: white;
            padding: 12px 16px;
            text-align: left;
            font-weight: 600;
        }
        
        td {
            padding: 12px 16px;
            border-bottom: 1px solid var(--border-color);
        }
        
        tr:last-child td {
            border-bottom: none;
        }
        
        tr:hover {
            background: var(--windi-light);
        }
        
        .chain-diagram {
            background: linear-gradient(135deg, #1e293b 0%, #334155 100%);
            color: white;
            padding: 32px;
            border-radius: 12px;
            margin: 24px 0;
            font-family: monospace;
            text-align: center;
        }
        
        .chain-step {
            display: inline-block;
            background: var(--windi-primary);
            padding: 12px 20px;
            border-radius: 8px;
            margin: 8px;
        }
        
        .chain-arrow {
            display: inline-block;
            color: var(--windi-accent);
            font-size: 24px;
            margin: 0 8px;
        }
        
        .envelope-sample {
            background: #0f172a;
            color: #22d3ee;
            padding: 24px;
            border-radius: 12px;
            font-family: monospace;
            font-size: 13px;
            overflow-x: auto;
        }
        
        .envelope-sample .key { color: #f472b6; }
        .envelope-sample .string { color: #a5f3fc; }
        .envelope-sample .hash { color: #86efac; }
        
        .status-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
            margin: 24px 0;
        }
        
        .status-card {
            background: white;
            border: 2px solid var(--windi-accent);
            border-radius: 8px;
            padding: 16px;
            text-align: center;
        }
        
        .status-card .icon {
            font-size: 32px;
            margin-bottom: 8px;
        }
        
        .status-card .label {
            font-weight: 600;
            color: var(--text-primary);
        }
        
        .status-card .check {
            color: var(--windi-primary);
            font-weight: bold;
        }
        
        .eu-compliance {
            background: linear-gradient(135deg, #1e40af 0%, #3b82f6 100%);
            color: white;
            padding: 24px;
            border-radius: 12px;
            margin: 24px 0;
        }
        
        .eu-compliance h4 {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 16px;
        }
        
        .eu-compliance ul {
            list-style: none;
            padding-left: 0;
        }
        
        .eu-compliance li {
            padding: 8px 0;
            border-bottom: 1px solid rgba(255,255,255,0.2);
        }
        
        .eu-compliance li:last-child {
            border-bottom: none;
        }
        
        footer {
            margin-top: 64px;
            padding-top: 32px;
            border-top: 2px solid var(--windi-primary);
            text-align: center;
        }
        
        .footer-brand {
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--windi-primary);
        }
        
        .footer-meta {
            color: var(--text-secondary);
            font-size: 0.9rem;
            margin-top: 8px;
        }
        
        .human-notice {
            background: #f0fdf4;
            border: 2px solid #059669;
            border-radius: 8px;
            padding: 16px;
            margin: 32px 0;
            text-align: center;
        }
        
        .human-notice h5 {
            color: #065f46;
            margin-bottom: 8px;
        }
        
        .human-notice p {
            color: #047857;
            font-size: 0.9rem;
            margin: 0;
        }
        
        .nav-links {
            display: flex;
            justify-content: space-between;
            margin: 32px 0;
            padding: 16px 0;
            border-top: 1px solid var(--border-color);
            border-bottom: 1px solid var(--border-color);
        }
        
        .nav-links a {
            color: var(--windi-primary);
            text-decoration: none;
            font-weight: 500;
        }
        
        .nav-links a:hover {
            text-decoration: underline;
        }
        
        @media print {
            body { background: white; }
            .container { max-width: 100%; }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <span class="badge">CHAPTER 6 ‚Äî NEW</span>
            <h1>Document Integrity Framework</h1>
            <p class="subtitle">WINDI v0.1 Specification & Implementation</p>
        </header>
        
        <div class="principle">
            "AI processes. Human decides. WINDI guarantees."<br>
            ‚Äî WINDI Operational Principle
        </div>
        
        <nav class="nav-links">
            <a href="index.html">‚Üê Back to Index</a>
            <a href="diagrams.html">Diagrams ‚Üí</a>
        </nav>

        <h2>6.1 Problem Statement</h2>
        
        <p>Traditional document management systems treat content and metadata as separate entities. A PDF can be modified, metadata falsified, and there exists no mathematical proof binding the document to its governance context.</p>
        
        <p>This creates a fundamental trust problem in institutional workflows, particularly critical under the <strong>EU AI Act</strong> requirements for AI-assisted document generation.</p>

        <div class="architecture-box">
            <h4>Research Question</h4>
            <p><em>How can cryptographic integrity mechanisms be embedded directly into document workflows to create verifiable governance-content binding that enables offline regulatory verification?</em></p>
        </div>

        <h2>6.2 WINDI Envelope v0.1</h2>
        
        <h3>Three-Component Architecture</h3>
        
        <div class="status-grid">
            <div class="status-card">
                <div class="icon">üìÑ</div>
                <div class="label">DOCUMENT</div>
                <div>ID, Version, Content Hash</div>
            </div>
            <div class="status-card">
                <div class="icon">üèõÔ∏è</div>
                <div class="label">GOVERNANCE</div>
                <div>Issuer, Actor, Policy, Jurisdiction</div>
            </div>
            <div class="status-card">
                <div class="icon">üîê</div>
                <div class="label">INTEGRITY</div>
                <div>Digests, Hash Chain, Signature</div>
            </div>
        </div>

        <h3>Cryptographic Chain</h3>
        
        <div class="chain-diagram">
            <div class="chain-step">body_sha256</div>
            <span class="chain-arrow">+</span>
            <div class="chain-step">governance_digest</div>
            <span class="chain-arrow">‚Üí</span>
            <div class="chain-step">doc_hash</div>
            <span class="chain-arrow">‚Üí</span>
            <div class="chain-step">struct_sig</div>
        </div>

        <table>
            <thead>
                <tr>
                    <th>Step</th>
                    <th>Operation</th>
                    <th>Output</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>1</td>
                    <td>SHA-256(document_bytes)</td>
                    <td><code>body_sha256</code></td>
                </tr>
                <tr>
                    <td>2</td>
                    <td>SHA-256(C14N(governance))</td>
                    <td><code>governance_digest</code></td>
                </tr>
                <tr>
                    <td>3</td>
                    <td>SHA-256(gov_digest + body_sha)</td>
                    <td><code>doc_hash</code></td>
                </tr>
                <tr>
                    <td>4</td>
                    <td>HMAC-SHA256(secret, doc_hash)</td>
                    <td><code>struct_sig</code></td>
                </tr>
            </tbody>
        </table>

        <h3>Canonical JSON (C14N)</h3>
        
        <p>To ensure deterministic hashing, governance metadata uses Canonical JSON serialization:</p>
        
        <pre><code>def canonical_json(data: Dict) -> bytes:
    return json.dumps(
        data, 
        sort_keys=True, 
        separators=(",", ":")
    ).encode("utf-8")</code></pre>

        <p>This eliminates JSON ordering ambiguity ‚Äî identical objects always produce identical hashes.</p>

        <h2>6.3 Production Envelope Sample</h2>
        
        <div class="envelope-sample">
{
  <span class="key">"schema"</span>: <span class="string">"windi.envelope"</span>,
  <span class="key">"schema_version"</span>: <span class="string">"0.1"</span>,
  <span class="key">"document"</span>: {
    <span class="key">"document_id"</span>: <span class="string">"BABEL-20260129213544"</span>,
    <span class="key">"version_id"</span>: <span class="string">"v1"</span>,
    <span class="key">"content_type"</span>: <span class="string">"application/pdf"</span>,
    <span class="key">"body_sha256"</span>: <span class="hash">"c1a86358d0b9fa155a7327c9eb89575f..."</span>
  },
  <span class="key">"governance"</span>: {
    <span class="key">"issuer_id"</span>: <span class="string">"windi.publishing.de"</span>,
    <span class="key">"responsible_actor_id"</span>: <span class="string">"WINDI-CEO-001:Jober M√∂gele Correa"</span>,
    <span class="key">"intent_code"</span>: <span class="string">"export.pdf"</span>,
    <span class="key">"policy_reference"</span>: <span class="string">"eu.ai.act.article.52"</span>,
    <span class="key">"jurisdictions"</span>: [<span class="string">"DE"</span>, <span class="string">"EU"</span>],
    <span class="key">"timestamp_issued"</span>: <span class="string">"2026-01-31T12:46:17+00:00"</span>
  },
  <span class="key">"integrity"</span>: {
    <span class="key">"governance_digest"</span>: <span class="hash">"73069ea070249546cc5ebb754f5b9665..."</span>,
    <span class="key">"doc_hash"</span>: <span class="hash">"6ab6bc50bf3cc46dcc8ce55335007e7a..."</span>,
    <span class="key">"struct_sig"</span>: <span class="hash">"e7f92e85f9d50bd40d675016226d972c..."</span>,
    <span class="key">"algo"</span>: <span class="string">"sha256+hmac-sha256"</span>
  }
}
        </div>

        <h2>6.4 EU AI Act Compliance</h2>
        
        <div class="eu-compliance">
            <h4>üá™üá∫ Article Alignment</h4>
            <ul>
                <li><strong>Article 52 (Transparency):</strong> governance.intent_code, governance.policy_reference</li>
                <li><strong>Article 17 (Quality Management):</strong> governance.responsible_actor_id, immutable binding</li>
                <li><strong>Article 61 (Post-market Monitoring):</strong> governance.timestamp_issued, audit trail</li>
                <li><strong>Article 13 (User Transparency):</strong> Human Authorship Notice in document</li>
            </ul>
        </div>

        <h2>6.5 Implementation Results</h2>
        
        <table>
            <thead>
                <tr>
                    <th>Component</th>
                    <th>Status</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>Canonicalization Module (C14N)</td>
                    <td>‚úÖ Operational</td>
                </tr>
                <tr>
                    <td>Envelope Generation</td>
                    <td>‚úÖ Automatic on Export</td>
                </tr>
                <tr>
                    <td>Governance Binding</td>
                    <td>‚úÖ SHA-256 + HMAC</td>
                </tr>
                <tr>
                    <td>API Verification Endpoint</td>
                    <td>‚úÖ /api/windi/verify/{id}</td>
                </tr>
                <tr>
                    <td>Offline Verification</td>
                    <td>‚úÖ Possible</td>
                </tr>
                <tr>
                    <td>EU AI Act Mapping</td>
                    <td>‚úÖ Articles 13, 17, 52, 61</td>
                </tr>
            </tbody>
        </table>

        <h2>6.6 Live Endpoints</h2>
        
        <div class="architecture-box">
            <h4>Production API</h4>
            <table>
                <tr>
                    <td><code>GET /api/windi/status</code></td>
                    <td>Integration status</td>
                </tr>
                <tr>
                    <td><code>GET /api/windi/envelope/{id}</code></td>
                    <td>Retrieve envelope</td>
                </tr>
                <tr>
                    <td><code>GET /api/windi/verify/{id}</code></td>
                    <td>Verify integrity</td>
                </tr>
            </table>
            <p style="margin-top: 16px; text-align: center;">
                <a href="https://windi-domain.com/api/windi/status" target="_blank" style="color: var(--windi-primary);">
                    üöÄ Test Live API
                </a>
            </p>
        </div>

        <h2>6.7 Verification Model</h2>
        
        <h3>Offline Verification (No Secrets Required)</h3>
        
        <pre><code># Regulator receives: document.pdf + envelope.json

# Step 1: Verify content hash
sha256sum document.pdf
# Compare with envelope.document.body_sha256 ‚úì

# Step 2: Verify governance digest
# Parse envelope.governance ‚Üí C14N ‚Üí SHA-256
# Compare with envelope.integrity.governance_digest ‚úì

# Step 3: Verify binding hash
# SHA256(governance_digest + body_sha256)
# Compare with envelope.integrity.doc_hash ‚úì</code></pre>

        <div class="human-notice">
            <h5>‚úçÔ∏è HUMAN AUTHORSHIP NOTICE</h5>
            <p>This document was created and reviewed by human authors.<br>
            AI assistance was used under human supervision and control.<br>
            Final decisions and content approval: Human responsibility.</p>
            <p style="margin-top: 12px; font-style: italic;">KI verarbeitet. Mensch entscheidet. WINDI garantiert.</p>
        </div>

        <footer>
            <div class="footer-brand">WINDI Publishing House</div>
            <div class="footer-meta">
                WINDI-QUITTUNG: WINDI-MASTER-31JAN26-B15B2801 | Hash: b15b2801<br>
                Autor: Jober M√∂gele Correa (WINDI-CEO-001) | Technical: Claude (Guardian Dragon)<br>
                Implementation Date: 31 January 2026
            </div>
            <div style="margin-top: 16px;">
                <img src="https://api.qrserver.com/v1/create-qr-code/?size=80x80&data=https://windi-domain.com/api/windi/verify/WINDI-MASTER-INTEGRITY-EN" alt="QR Code">
            </div>
            <div class="footer-meta" style="margin-top: 12px;">
                A4 Desk BABEL v4.7-gov | EU AI Act Compliant<br>
                ‚úì Verified Institutional Documentation
            </div>
        </footer>
    </div>
</body>
</html>
