<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WINDI Print Watermark Layer — Technical Note v0.1</title>
    <link href="https://fonts.googleapis.com/css2?family=Crimson+Text:ital@0;1&family=Libre+Baskerville:wght@400;700&family=Source+Sans+Pro:wght@300;400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/academic.css">
    <style>
        .tech-box {
            background: #1a1a2e;
            border: 1px solid #4a4a6a;
            border-radius: 8px;
            padding: 1.5rem;
            margin: 1.5rem 0;
        }
        .tech-box h4 {
            color: #6366f1;
            margin-bottom: 0.75rem;
            font-size: 1rem;
        }
        .tech-box code {
            background: #0d0d1a;
            padding: 0.2rem 0.5rem;
            border-radius: 4px;
            font-family: 'Consolas', monospace;
            font-size: 0.9rem;
        }
        .tech-box pre {
            background: #0d0d1a;
            padding: 1rem;
            border-radius: 4px;
            overflow-x: auto;
            margin: 0.75rem 0;
        }
        .is-box {
            background: rgba(16, 185, 129, 0.1);
            border-left: 3px solid #10b981;
            padding: 1rem;
            margin: 1rem 0;
        }
        .is-not-box {
            background: rgba(239, 68, 68, 0.1);
            border-left: 3px solid #ef4444;
            padding: 1rem;
            margin: 1rem 0;
        }
        .pipeline-diagram {
            background: #1e1e2e;
            border-radius: 8px;
            padding: 1.5rem;
            text-align: center;
            font-family: monospace;
            line-height: 2;
            margin: 1.5rem 0;
        }
        .pipeline-diagram .arrow {
            color: #6366f1;
        }
        .visibility-table {
            width: 100%;
            border-collapse: collapse;
            margin: 1rem 0;
        }
        .visibility-table th,
        .visibility-table td {
            padding: 0.75rem;
            text-align: left;
            border-bottom: 1px solid #333;
        }
        .visibility-table th {
            color: #6366f1;
        }
        .chain-diagram {
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap;
            gap: 1rem;
            margin: 1.5rem 0;
        }
        .chain-item {
            background: #1a1a2e;
            border: 1px solid #4a4a6a;
            border-radius: 8px;
            padding: 1rem;
            text-align: center;
            flex: 1;
            min-width: 200px;
        }
        .chain-item h5 {
            color: #6366f1;
            margin-bottom: 0.5rem;
        }
        .chain-item .domain {
            font-size: 0.85rem;
            color: #888;
        }
        .chain-item .method {
            font-size: 0.9rem;
            margin-top: 0.5rem;
            color: #10b981;
        }
        .lang-switch {
            text-align: right;
            margin-bottom: 1rem;
        }
        .lang-switch a {
            padding: 0.5rem 1rem;
            background: #1a1a2e;
            color: #6366f1;
            text-decoration: none;
            border-radius: 4px;
            margin-left: 0.5rem;
        }
        .lang-switch a:hover {
            background: #2a2a3e;
        }
    </style>
</head>
<body>
    <header class="thesis-header">
        <h1>WINDI Print Watermark Layer</h1>
        <p class="subtitle">Technical Note v0.1 — Physical Forensic Extension</p>
        <div class="meta">
            <p>WINDI Publishing House — January 2026</p>
        </div>
        <span class="version-badge">TECHNICAL NOTE</span>
    </header>

    <nav class="thesis-nav">
        <ul>
            <li><a href="index.html">Home</a></li>
            <li><a href="document-integrity.html">Document Integrity</a></li>
            <li><a href="#problem">Problem</a></li>
            <li><a href="#architecture">Architecture</a></li>
            <li><a href="#integration">Integration</a></li>
            <li><a href="#limitations">Limitations</a></li>
        </ul>
    </nav>

    <main class="thesis-content">
        <div class="principle-quote">
            "The guarantee extends from digital to physical."
            <div class="attribution">— WINDI Print Layer Principle</div>
        </div>

        <section class="chapter" id="abstract">
            <div class="chapter-number">Abstract</div>
            <h2>Physical Forensic Extension</h2>
            <p>This technical note describes the WINDI Print Watermark Layer, an optional extension that bridges the digital-physical integrity gap in document governance. The module embeds deterministic micro-vector patterns derived from the document hash into PDF files prior to printing, enabling forensic traceability between printed artifacts and their digitally governed originals.</p>
        </section>

        <section class="chapter" id="problem">
            <div class="chapter-number">Section 1</div>
            <h2>Problem Statement</h2>
            <p>The WINDI governance envelope provides cryptographic integrity for digital documents through the <code>doc_hash</code>, <code>governance_digest</code>, and structural signatures. However, when documents are printed, this digital chain of custody is broken.</p>
            <p>Printed documents exist outside the cryptographic domain. A printed certificate, contract, or official document cannot be directly verified against its digital governance envelope.</p>
            <p>The Print Watermark Layer addresses this gap by embedding physical forensic markers that survive the printing process and remain mathematically linked to the original <code>doc_hash</code>.</p>
        </section>

        <section class="chapter" id="design">
            <div class="chapter-number">Section 2</div>
            <h2>Design Principles</h2>
            
            <div class="is-box">
                <h4>✓ What This Layer IS</h4>
                <ul>
                    <li>A forensic traceability mechanism for printed documents</li>
                    <li>A deterministic pattern derived from cryptographic hashes</li>
                    <li>A disincentive against unauthorized reproduction</li>
                    <li>A bridge between digital governance and physical artifacts</li>
                    <li>Similar to techniques used in official certificates and secure documents</li>
                </ul>
            </div>

            <div class="is-not-box">
                <h4>✗ What This Layer IS NOT</h4>
                <ul>
                    <li>A magical invisible mark</li>
                    <li>Absolute protection against falsification</li>
                    <li>A replacement for digital verification</li>
                    <li>DRM or copy protection</li>
                </ul>
            </div>

            <p>This distinction is critical. The layer provides forensic evidence, not cryptographic proof. A skilled adversary with sufficient resources could potentially reproduce the patterns. The value lies in raising the bar for casual forgery and enabling post-hoc forensic analysis.</p>
        </section>

        <section class="chapter" id="architecture">
            <div class="chapter-number">Section 3</div>
            <h2>Technical Architecture</h2>

            <h3>3.1 Pattern Generation</h3>
            <p>The watermark patterns are generated deterministically from the <code>doc_hash</code>:</p>
            
            <div class="tech-box">
                <pre>pattern_seed = SHA256(doc_hash)</pre>
                <p>This seed initializes a deterministic pseudo-random number generator that produces identical patterns for identical <code>doc_hash</code> values. The same document will always generate the same watermark pattern, enabling verification.</p>
            </div>

            <h3>3.2 Pattern Types</h3>
            
            <div class="tech-box">
                <h4>Micro-Lines (Vectorial)</h4>
                <p>Width: 0.1–0.2 points | Opacity: 3% | Quantity: 50 per page</p>
                <p>Creates unique geometric fingerprint derived from seed.</p>
            </div>

            <div class="tech-box">
                <h4>Micro-Dots</h4>
                <p>Radius: 0.2–0.5 points | Distribution: Pseudo-random</p>
                <p>Supplementary pattern density for forensic detection.</p>
            </div>

            <div class="tech-box">
                <h4>Micro-Text</h4>
                <p>Size: 0.3–0.5 points | Content: <code>WINDI:{doc_hash_fragment}:{issuer_id}</code></p>
                <p>Human-readable identification under magnification.</p>
            </div>

            <h3>3.3 Visibility Characteristics</h3>
            <table class="visibility-table">
                <tr>
                    <th>Condition</th>
                    <th>Visibility</th>
                </tr>
                <tr>
                    <td>Normal viewing</td>
                    <td>Invisible</td>
                </tr>
                <tr>
                    <td>10x magnification</td>
                    <td>Barely perceptible</td>
                </tr>
                <tr>
                    <td>50x magnification</td>
                    <td>Clearly visible</td>
                </tr>
                <tr>
                    <td>1200+ DPI scan</td>
                    <td>Fully recoverable</td>
                </tr>
            </table>
        </section>

        <section class="chapter" id="integration">
            <div class="chapter-number">Section 4</div>
            <h2>Integration with A4Desk Pipeline</h2>

            <div class="pipeline-diagram">
                User initiates PDF export<br>
                <span class="arrow">↓</span><br>
                A4Desk generates document content<br>
                <span class="arrow">↓</span><br>
                WINDI Envelope created (doc_hash generated)<br>
                <span class="arrow">↓</span><br>
                <strong style="color:#6366f1">Print Watermark Layer embeds patterns using doc_hash</strong><br>
                <span class="arrow">↓</span><br>
                Final PDF delivered to user
            </div>

            <div class="tech-box">
                <h4>Module Location</h4>
                <pre>/opt/windi/engine/windi_print_layer.py</pre>
            </div>

            <div class="tech-box">
                <h4>Primary Function</h4>
                <pre>def embed_print_watermark(pdf_bytes: bytes, 
                          doc_hash: str,
                          issuer_id: str = "WINDI") -> bytes:
    """
    Embed deterministic micro-vector watermark into PDF.
    Returns modified PDF bytes with forensic layer.
    """</pre>
            </div>
        </section>

        <section class="chapter" id="chain">
            <div class="chapter-number">Section 5</div>
            <h2>Integrity Chain</h2>

            <div class="principle-quote">
                "AI processes. Human decides. WINDI guarantees."
                <div class="attribution">— Extended to physical domain</div>
            </div>

            <div class="chain-diagram">
                <div class="chain-item">
                    <h5>WINDI Envelope</h5>
                    <div class="domain">Digital Domain</div>
                    <div class="method">Cryptographic Verification</div>
                </div>
                <div class="chain-item">
                    <h5>Registry</h5>
                    <div class="domain">Institutional Domain</div>
                    <div class="method">Certificate Lookup</div>
                </div>
                <div class="chain-item">
                    <h5>Print Watermark</h5>
                    <div class="domain">Physical Domain</div>
                    <div class="method">Forensic Analysis</div>
                </div>
            </div>
        </section>

        <section class="chapter" id="limitations">
            <div class="chapter-number">Section 6</div>
            <h2>Limitations and Honest Assessment</h2>

            <h3>Technical Limitations</h3>
            <ul>
                <li>Patterns may degrade with low-quality printing</li>
                <li>Photocopies will show pattern degradation</li>
                <li>Extreme document wear may destroy patterns</li>
                <li>Verification requires specialized scanning equipment</li>
            </ul>

            <h3>Security Limitations</h3>
            <ul>
                <li>A determined adversary with access to the <code>doc_hash</code> could regenerate patterns</li>
                <li>The layer provides forensic evidence, not cryptographic proof</li>
                <li>Physical security is inherently weaker than digital security</li>
            </ul>
        </section>

        <section class="chapter">
            <div class="chapter-number">Conclusion</div>
            <h2>Summary</h2>
            <p>The WINDI Print Watermark Layer represents a pragmatic approach to bridging digital and physical document integrity. It does not claim to provide absolute security—such claims would be dishonest. Instead, it provides a forensic traceability mechanism that raises the bar for document forgery and enables post-hoc verification when disputes arise.</p>
            <p>The layer is optional, modular, and mathematically linked to the existing WINDI governance infrastructure. It demonstrates that document sovereignty can extend beyond the digital realm without abandoning the principles of honesty and transparency that define the WINDI approach.</p>
        </section>

        <section class="windi-receipt-footer">
            <div style="display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap">
                <div>
                    <strong style="color:#6366f1">WINDI Publishing House</strong><br>
                    <span style="font-size:0.85rem">Technical Note: Print Watermark Layer v0.1</span><br>
                    <span style="font-size:0.8rem;color:#888">January 2026 | Kempten, Bavaria, Germany</span>
                </div>
                <div style="text-align:right">
                    <a href="document-integrity.html" style="display:inline-block;padding:0.5rem 1rem;background:#0d9488;color:#fff;text-decoration:none;border-radius:4px;margin:0.25rem">← Document Integrity</a>
                    <a href="index.html" style="display:inline-block;padding:0.5rem 1rem;background:#003366;color:#fff;text-decoration:none;border-radius:4px;margin:0.25rem">Home</a>
                </div>
            </div>
        </section>
    </main>

    <footer style="text-align:center;padding:2rem;color:#666;font-size:0.85rem">
        <p>WINDI System Documentation — Masterarbeit Project</p>
        <p style="margin-top:0.5rem;font-style:italic">"AI processes. Human decides. WINDI guarantees."</p>
    </footer>
</body>
</html>
